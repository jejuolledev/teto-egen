<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>당신의 결과 - 테토 vs 애겐</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container result-container">
    <!-- 결과 헤더 -->
    <div class="result-header">
      <h1 class="result-title">당신의 연애 성향은</h1>
      <div class="result-type" id="resultType">
        <span class="result-emoji" id="resultEmoji">👨‍💼</span>
        <h2 class="result-type-name" id="resultTypeName">테토남</h2>
        <p class="result-subtitle" id="resultSubtitle">주도하는 남자</p>
      </div>
      <p class="result-oneliner" id="resultOneliner">"내가 리드할게, 너는 따라만 와"</p>
    </div>

    <!-- 점수 게이지 -->
    <div class="score-section">
      <div class="score-gauge">
        <div class="gauge-labels">
          <span>애겐형</span>
          <span>테토형</span>
        </div>
        <div class="gauge-bar">
          <div class="gauge-fill" id="gaugeFill"></div>
          <div class="gauge-marker" id="gaugeMarker"></div>
        </div>
      </div>
      <p class="score-text">
        <span id="scoreLabel">테토형</span> 성향 <span id="scorePercent">75</span>%
      </p>
    </div>

    <!-- 결과 설명 -->
    <div class="result-content">
      <div class="content-section">
        <h3 class="section-title">📝 당신은 이런 사람</h3>
        <p class="description" id="description"></p>
      </div>

      <div class="content-section">
        <h3 class="section-title">💕 연애 스타일</h3>
        <ul class="style-list" id="loveStyle"></ul>
      </div>

      <div class="content-section">
        <h3 class="section-title">👍 장점 & 👎 단점</h3>
        <div class="pros-cons">
          <p class="pros"><strong>장점:</strong> <span id="pros"></span></p>
          <p class="cons"><strong>단점:</strong> <span id="cons"></span></p>
        </div>
      </div>

      <div class="content-section compatibility">
        <h3 class="section-title">💑 궁합</h3>
        <p class="compatibility-text">
          <span class="best">최고 궁합: <strong id="bestMatch"></strong></span><br>
          <span class="worst">최악 궁합: <strong id="worstMatch"></strong></span><br>
          <span class="reason" id="compatReason"></span>
        </p>
      </div>

      <div class="content-section tips">
        <h3 class="section-title">💡 연애 팁</h3>
        <ul class="tips-list" id="tipsList"></ul>
      </div>
    </div>

    <!-- 공유 버튼 -->
    <div class="share-section">
      <h3 class="share-title">친구들도 테스트해보기</h3>
      <div class="share-buttons">
        <button class="share-btn kakao" onclick="shareKakao()">
          <span class="share-icon">💬</span>
          카카오톡
        </button>
        <button class="share-btn twitter" onclick="shareTwitter()">
          <span class="share-icon">🐦</span>
          트위터
        </button>
        <button class="share-btn link" onclick="copyLink()">
          <span class="share-icon">🔗</span>
          링크 복사
        </button>
      </div>
      <p class="share-text" id="shareText"></p>
    </div>

    <!-- 다시하기 버튼 -->
    <div class="retry-section">
      <button class="retry-btn" onclick="location.href='index.html'">
        🔄 다시 테스트하기
      </button>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
      <p>Made with 💕 by ZZB Labs</p>
      <div class="hashtags" id="hashtags"></div>
    </footer>
  </div>

  <script type="module">
    import { results, detailedContent } from './results.js';

    // localStorage에서 결과 가져오기
    const resultData = JSON.parse(localStorage.getItem('testResult'));
    
    if (!resultData) {
      alert('결과를 찾을 수 없습니다. 테스트를 다시 시작해주세요.');
      location.href = 'index.html';
    }

    const type = resultData.type;
    const result = results[type];
    const details = detailedContent[type];

    // 결과 표시
    document.getElementById('resultEmoji').textContent = result.emoji;
    document.getElementById('resultTypeName').textContent = result.title;
    document.getElementById('resultSubtitle').textContent = result.subtitle;
    document.getElementById('resultOneliner').textContent = result.oneLiner;
    
    // 점수 게이지
    const percentage = resultData.percentage;
    document.getElementById('scorePercent').textContent = percentage;
    document.getElementById('gaugeFill').style.width = percentage + '%';
    document.getElementById('gaugeMarker').style.left = percentage + '%';
    
    if (resultData.score >= 0) {
      document.getElementById('scoreLabel').textContent = '테토형';
    } else {
      document.getElementById('scoreLabel').textContent = '애겐형';
    }
    
    // 설명
    document.getElementById('description').textContent = result.description;
    
    // 연애 스타일
    const styleHtml = result.loveStyle.map(style => `<li>${style}</li>`).join('');
    document.getElementById('loveStyle').innerHTML = styleHtml;
    
    // 장단점
    document.getElementById('pros').textContent = result.pros;
    document.getElementById('cons').textContent = result.cons;
    
    // 궁합
    document.getElementById('bestMatch').textContent = result.compatibility.best;
    document.getElementById('worstMatch').textContent = result.compatibility.worst;
    document.getElementById('compatReason').textContent = result.compatibility.reason;
    
    // 연애 팁
    const tipsHtml = details.relationshipTips.map(tip => `<li>${tip}</li>`).join('');
    document.getElementById('tipsList').innerHTML = tipsHtml;
    
    // 공유 텍스트
    document.getElementById('shareText').textContent = result.shareText;
    
    // 해시태그
    const hashtagsHtml = result.hashtags.map(tag => `<span class="hashtag">${tag}</span>`).join(' ');
    document.getElementById('hashtags').innerHTML = hashtagsHtml;

    // 공유 함수들
    window.shareKakao = function() {
      // 실제 구현 시 Kakao SDK 사용
      alert('카카오톡 공유 기능 (Kakao SDK 연동 필요)');
      
      /*
      // Kakao SDK 예시
      Kakao.Share.sendDefault({
        objectType: 'feed',
        content: {
          title: '테토 vs 애겐 - 연애 성향 테스트',
          description: result.shareText,
          imageUrl: 'YOUR_IMAGE_URL',
          link: {
            mobileWebUrl: window.location.href,
            webUrl: window.location.href,
          },
        },
      });
      */
    };

    window.shareTwitter = function() {
      const text = encodeURIComponent(result.shareText + ' ' + result.hashtags.join(' '));
      const url = encodeURIComponent(window.location.origin);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
    };

    window.copyLink = function() {
      const url = window.location.origin;
      navigator.clipboard.writeText(url).then(() => {
        alert('링크가 복사되었습니다! 🎉');
      });
    };
  </script>
</body>
</html>
